(this.webpackJsonptictactoe_react=this.webpackJsonptictactoe_react||[]).push([[0],{18:function(e,t,r){},19:function(e,t,r){},20:function(e,t,r){},22:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var s=r(3),n=r.n(s),i=r(12),a=r.n(i),o=(r(18),r(1)),c=r(2),u=r(7),h=r(6);r(19);function l(){return new Worker(r.p+"static/js/tictactoe-ai.worker.7a17dacd.worker.js")}var v=function(){function e(){Object(o.a)(this,e),this.worker=new l}return Object(c.a)(e,[{key:"postMessage",value:function(e){this.worker.postMessage(e)}},{key:"addEventListener",value:function(e,t){this.worker.addEventListener(e,t)}}]),e}(),f=r(10),d=(r(20),r(0));function b(e){return Object(d.jsxs)("div",{className:"highscores",children:[Object(d.jsx)("h2",{children:"Highscores"}),Object(d.jsx)("div",{className:"centering",children:Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Score"}),Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Date"})]})}),Object(d.jsx)("tbody",{children:e.scores.scores.map((function(e,t){return Object(d.jsxs)("tr",{className:"score-row",children:[Object(d.jsx)("td",{children:e.score}),Object(d.jsx)("td",{children:e.name}),Object(d.jsx)("td",{children:j(e.time)})]},t)}))})]})})]})}function j(e){var t=e.split(" "),r=Object(f.a)(t,5),s=r[1],n=r[2],i=r[3],a=r[4];return"".concat(n," ").concat(s," ").concat(i," - ").concat(a)}var m=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(e){var s;return Object(o.a)(this,r),(s=t.call(this,e)).state={value:""},s}return Object(c.a)(r,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onNameSubmitted&&this.props.onNameSubmitted(this.state.value)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"You Made it to the Highscores"}),Object(d.jsx)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:Object(d.jsxs)("label",{children:["Enter Name:",Object(d.jsx)("input",{type:"text",value:this.state.value,onChange:function(t){return e.handleChange(t)}})]})})]})}}]),r}(n.a.Component),g=r(9),O=(r(22),function(e){var t=Object(s.useState)(!1),r=Object(f.a)(t,2),n=r[0],i=r[1],a=n&&void 0!==e.onClick?{backgroundColor:"#ddd",opacity:1,transition:"all .2s ease-in-out"}:{opacity:1,transition:"all .2s ease-in-out"};return Object(d.jsx)("button",{style:a,className:"square",onClick:void 0!==e.onClick?function(){return e.onClick(e.squareIx)}:void 0,onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:e.value})}),y=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"renderSquare",value:function(e){return Object(d.jsx)(O,{value:this.props.getSquareSymbol(e),onClick:this.props.onClicks[e],squareIx:e},e)}},{key:"renderRow",value:function(e,t){var r=this,s=Object(g.a)(Array(t).keys());return Object(d.jsx)("div",{className:"board-row",children:s.map((function(t){return r.renderSquare(e+t)}))},e)}},{key:"render",value:function(){var e=this,t=this.props.size,r=Object(g.a)(Array(t).keys());return Object(d.jsx)("div",{className:"game-board",children:Object(d.jsx)("div",{children:r.map((function(r){return e.renderRow(r*t,t)}))})})}}]),r}(n.a.Component),k=r(4),S=Object(k.a)("_scores"),_=Object(k.a)("_storageAPI"),p=function(){function e(t){Object(o.a)(this,e),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this._storageAPI=t,this._scores=void 0!==this._storageAPI.getItem("scores")?JSON.parse(this._storageAPI.getItem("scores")):[]}return Object(c.a)(e,[{key:"addScore",value:function(e,t){return!(void 0===t||t.length<=0)&&(!(!Number.isInteger(e)||e<0)&&(this._scores.push({score:e,name:t,time:Date()}),this._scores.sort((function(e,t){return t.score-e.score})),this._save(),!0))}},{key:"scores",get:function(){return Array.from(this._scores)}},{key:"_save",value:function(){this._storageAPI.setItem("scores",JSON.stringify(this._scores))}},{key:"reset",value:function(){this._scores=[],this._save()}}]),e}(),x=r(13),q=Object(k.a)("_size"),w=Object(k.a)("_squares"),C=Object(k.a)("_turn"),N=function(){function e(t){if(Object(o.a)(this,e),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),t<3||t%2!==1)throw new Error("The argument size: '".concat(t,"' is not valid for tic tac toe (3, 5, 7, ...)"));this._size=t,this.reset()}return Object(c.a)(e,[{key:"size",get:function(){return this._size}},{key:"turn",get:function(){return this._turn}},{key:"squares",get:function(){return Object(g.a)(this._squares)}},{key:"from",value:function(){var t=new e(this.size);t._turn=this.turn;for(var r=0;r<this._squares.length;r++)t._squares[r]=this._squares[r];return t}},{key:"reset",value:function(){this._turn=0,this._squares=Array(this.size*this.size).fill(null)}},{key:"_scoreSegment",value:function(e,t,r){for(var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._squares[e],n=this._squares,i=0,a=0;a<r;a++,e+=t)s===n[e]&&i++;return i}},{key:"_getChecks",value:function(){for(var e=this.size,t=[[0,e+1],[e-1,e-1]],r=0;r<e;r++)t.push([r*e,1]),t.push([r,e]);return t}},{key:"getScore",value:function(e){for(var t=this._getChecks(),r=0,s=this.size,n=0;n<t.length;n++){var i=this._scoreSegment(t[n][0],t[n][1],s,e);i>r&&(r=i)}return r}},{key:"checkWinner",value:function(){for(var e=this.size,t=this._getChecks(),r=0;r<t.length;r++)if(this._scoreSegment(t[r][0],t[r][1],e)===e)return this._squares[t[r][0]];return!1}},{key:"getTurnSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.turn;return e%2===0?"X":"O"}},{key:"getSquareSymbol",value:function(e){return this._squares[e]}},{key:"countPlayerSymbols",value:function(e){return this._squares.reduce((function(t,r){return r===e?t+1:t}),0)}},{key:"getValidMoves",value:function(){var e=this,t=this.getTurnSymbol();if(!(this.countPlayerSymbols(t)>=this.size)){var r=[];return this._squares.forEach((function(t,s){(function(e,t,r){return(0!==t||e!==Math.floor(r.length/2))&&null===r[e]})(s,e.turn,e._squares)&&r.push({to:s})})),r}var s=function(){for(var r=[],s=function(s){if(e.getSquareSymbol(s)===t){e._squares[s]=null;var n=e.getValidMoves();e._squares[s]=t,n.forEach((function(e){s!==e.to&&r.push({from:s,to:e.to})}))}},n=0;n<e._squares.length;n++)s(n);return{v:r}}();if("object"===typeof s)return s.v}},{key:"doMove",value:function(e){Number.isInteger(e)&&(e=null===this._squares[e]?{to:e}:{from:e});var t,r=this.getValidMoves(),s=Object(x.a)(r);try{for(s.s();!(t=s.n()).done;){var n=t.value;if(e.from===n.from&&(void 0===e.to||e.to===n.to))return void 0!==e.from&&(this._squares[e.from]=null),void 0!==e.to&&(this._squares[e.to]=this.getTurnSymbol(),this._turn++),!0}}catch(i){s.e(i)}finally{s.f()}return!1}}],[{key:"createFrom",value:function(t,r){var s=new e(Math.floor(Math.sqrt(t.length)));if(s._turn=r,s._squares.length!==t.length)throw new Error("The argument squares length: '".concat(t.length,"' is not valid for tic tac toe (9, 25, 49, ...)"));for(var n=0;n<t.length;n++)s._squares[n]=t[n];return s}}]),e}();function z(e){return Object(d.jsx)("div",{children:e.status})}function T(e){return Object(d.jsx)("button",{onClick:e.onClick,children:e.text})}var I=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(e){var s;return Object(o.a)(this,r),(s=t.call(this,e)).state={status:"Game Not Started",scores:new p(void 0!==e.localStorage?e.localStorage:localStorage),game:new N(3)},s._aiWaitTime=2e3,s.aiWorker=new v,s.aiWorker.addEventListener("message",(function(e){s.onBoardClick(e.data.ix)})),s}return Object(c.a)(r,[{key:"aiWaitTime",get:function(){return this._aiWaitTime}},{key:"onBoardClick",value:function(e){var t=this,r=this.state.game.turn;if(this.state.game.doMove(e)&&(this.onGameUpdate(this.state.game),!this.state.game.checkWinner()&&this.isAITurn()&&r!==this.state.game.turn)){var s=this.state.game;setTimeout((function(){t.aiWorker.postMessage({gameSquares:s.squares,turn:s.turn})}),this.aiWaitTime)}}},{key:"onGameUpdate",value:function(e){var t=e.checkWinner(),r=this.state.newScore;t&&(r=e.turn),this.setState({game:e,scores:this.state.scores,newScore:r})}},{key:"onNameSubmitted",value:function(e,t){this.state.scores.addScore(t,e)&&this.setState({game:this.state.game,scores:this.state.scores,newScore:void 0})}},{key:"isAITurn",value:function(){var e=this.state.game;return e.getTurnSymbol()===e.getTurnSymbol(1)}},{key:"resetGame",value:function(){this.setState({game:new N(this.state.game.size),scores:this.state.scores,newScore:void 0})}},{key:"resetHighscores",value:function(){this.state.scores.reset(),this.setState({game:this.state.game,scores:this.state.scores,newScore:void 0})}},{key:"render",value:function(){var e=this,t=this.state.game,r="Turn: ".concat(t.turn+1," Next Player: ").concat(t.getTurnSymbol()),s=t.checkWinner();s&&(r="Winner is: ".concat(s," at Turn: ").concat(t.turn));for(var n=[],i=t.getValidMoves(),a=0;a<t.size*t.size;a++){var o=!1;if(!t.checkWinner()&&!this.isAITurn())for(var c=0;c<i.length;c++)if(void 0!==i[c]&&i[c].from===a||void 0===i[c].from&&i[c].to===a){o=!0;break}n.push(o?function(t){e.onBoardClick(t)}:void 0)}return Object(d.jsxs)("div",{className:"game",children:[Object(d.jsx)("div",{className:"game-info",children:Object(d.jsx)(z,{status:r})}),Object(d.jsx)(y,{onClicks:n,size:t.size,getSquareSymbol:function(e){return t.getSquareSymbol(e)}}),Object(d.jsx)("div",{className:"controls",children:Object(d.jsx)(T,{text:"Reset Game",onClick:function(){e.resetGame()}})}),this.state.newScore?Object(d.jsx)(m,{onNameSubmitted:function(t){e.onNameSubmitted(t,e.state.newScore)}}):"",Object(d.jsx)(b,{scores:this.state.scores}),Object(d.jsx)("div",{className:"controls",children:Object(d.jsx)(T,{text:"Reset Highscores",onClick:function(){e.resetHighscores()}})})]})}}]),r}(n.a.Component);a.a.render(Object(d.jsx)(I,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.1edb8b4c.chunk.js.map