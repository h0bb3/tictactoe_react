(this.webpackJsonptictactoe_react=this.webpackJsonptictactoe_react||[]).push([[0],{17:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(10),s=r(2),i=r(3),a=r(8),o=r(7),u=r(1),c=r.n(u),l=r(11),h=r.n(l),f=(r(17),r(12)),v=r(6),m=Object(v.a)("_size"),g=Object(v.a)("_turn"),d=Object(v.a)("_squares"),y=function(){function e(t){if(Object(s.a)(this,e),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),t<3||t%2!==1)throw new Error("The argument size: '".concat(t,"' is not valid for tic tac toe (3, 5, 7, ...)"));this._size=t,this.reset()}return Object(i.a)(e,[{key:"size",get:function(){return this._size}},{key:"from",value:function(){var t=new e(this.size);t._turn=this.turn;for(var r=0;r<this._squares.length;r++)t._squares[r]=this._squares[r];return t}},{key:"reset",value:function(){this._turn=0,this._squares=Array(this.size*this.size).fill(null)}},{key:"_scoreSegment",value:function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._squares[e],s=this._squares,i=0,a=0;a<r;a++,e+=t)n===s[e]&&i++;return i}},{key:"_getChecks",value:function(){for(var e=this.size,t=[[0,e+1],[e-1,e-1]],r=0;r<e;r++)t.push([r*e,1]),t.push([r,e]);return t}},{key:"getScore",value:function(e){for(var t=this._getChecks(),r=0,n=this.size,s=0;s<t.length;s++){var i=this._scoreSegment(t[s][0],t[s][1],n,e);i>r&&(r=i)}return r}},{key:"checkWinner",value:function(){for(var e=this.size,t=this._getChecks(),r=0;r<t.length;r++)if(this._scoreSegment(t[r][0],t[r][1],e)===e)return this._squares[t[r][0]];return!1}},{key:"turn",get:function(){return this._turn}},{key:"getTurnSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.turn;return e%2===0?"X":"O"}},{key:"getSquareSymbol",value:function(e){return this._squares[e]}},{key:"countPlayerSymbols",value:function(e){return this._squares.reduce((function(t,r){return r===e?t+1:t}),0)}},{key:"getValidMoves",value:function(){var e=this,t=this.getTurnSymbol();if(!(this.countPlayerSymbols(t)>=this.size)){var r=[];return this._squares.forEach((function(t,n){(function(e,t,r){return(0!==t||e!==Math.floor(r.length/2))&&null===r[e]})(n,e.turn,e._squares)&&r.push({to:n})})),r}var n=function(){for(var r=[],n=function(n){if(e.getSquareSymbol(n)===t){e._squares[n]=null;var s=e.getValidMoves();e._squares[n]=t,s.forEach((function(e){n!==e.to&&r.push({from:n,to:e.to})}))}},s=0;s<e._squares.length;s++)n(s);return{v:r}}();if("object"===typeof n)return n.v}},{key:"doMove",value:function(e){Number.isInteger(e)&&(e=null===this._squares[e]?{to:e}:{from:e});var t,r=this.getValidMoves(),n=Object(f.a)(r);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(e.from===s.from&&(void 0===e.to||e.to===s.to))return void 0!==e.from&&(this._squares[e.from]=null),void 0!==e.to&&(this._squares[e.to]=this.getTurnSymbol(),this._turn++),!0}}catch(i){n.e(i)}finally{n.f()}return!1}}]),e}();function b(e){if(!e instanceof y)throw new TypeError("argument tttGame is not an instance of TicTacToe");var t=j(e.from(),0,e.size<5?6:2);Array.isArray(t)?e.doMove(t[1]):(console.log("AI is screwed... doing random move"),function(e){if(!e instanceof y)throw new TypeError("argument tttGame is not an instance of TicTacToe");var t,r=e.getValidMoves();do{t=r[Math.floor(Math.random()*r.length)]}while(t[0]===t[1]);e.doMove(t)}(e))}function j(e,t,r){for(var n=e.getValidMoves(),s=[],i=0;i<n.length;i++){if(k(e.from(),n[i])===e.size)return[e.size,n[i]];if(t+1<r){var a=e.from();a.doMove(n[i]);var o=j(a,t+1,r);if(!Array.isArray(o))return[e.size,n[i]];Math.abs(o[0])<e.size&&s.push([-o[0],n[i]])}else s.push([0,n[i]])}if(s.sort((function(e,t){return t-e})),s.length>1)for(;s[0][0]!==s[s.length-1][0];)s.pop();return s[Math.floor(Math.random()*s.length)]}function k(e,t){var r=e.getTurnSymbol();return e.doMove(t),e.getScore(r)}var O=r(0),S=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={value:null},n}return Object(i.a)(r,[{key:"render",value:function(){var e=this;return Object(O.jsx)("button",{className:"square",onClick:function(){return e.props.onClick()},children:this.props.value})}}]),r}(c.a.Component),_=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).size=0,n.sizes=[[3,"3x3"],[5,"5x5"],[7,"7x7"],[9,"9x9"]],n.state=n.getInitialState(),n.aiPlayerSymbol=n.state.game.getTurnSymbol(1),n}return Object(i.a)(r,[{key:"renderSquare",value:function(e,t){var r=this;return Object(O.jsx)(S,{value:this.state.game.getSquareSymbol(e),onClick:function(){return t?r.doNada():r.handleClick(e)}},e)}},{key:"doNada",value:function(){}},{key:"constructState",value:function(e){return{game:e}}},{key:"isPlayerTurn",value:function(e,t){return e.getTurnSymbol()===t}},{key:"handleClick",value:function(e){if(this.state.game.doMove(e)&&(this.setState(this.constructState(this.state.game)),!this.state.game.checkWinner()&&this.isPlayerTurn(this.state.game,this.aiPlayerSymbol))){var t=this.state.game,r=this;setTimeout((function(){b(t),r.setState(r.constructState(r.state.game))}),2e3)}}},{key:"renderRow",value:function(e,t,r){var s=this,i=Object(n.a)(Array(t).keys());return Object(O.jsx)("div",{className:"board-row",children:i.map((function(t){return s.renderSquare(e+t,r)}))},e)}},{key:"getInitialState",value:function(){return this.constructState(new y(this.sizes[this.size][0]))}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"setSize",value:function(e){for(var t=0;t<this.sizes.length;t++)e===this.sizes[t][1]&&(this.size=t);this.setState(this.constructState(this.state.game))}},{key:"render",value:function(){var e=this,t="Turn: ".concat(this.state.game.turn+1," Next Player: ").concat(this.state.game.getTurnSymbol()),r=this.state.game.checkWinner(),s=this.state.game.size;r&&(t="Winner is: ".concat(r," at Turn: ").concat(this.state.game.turn));var i=Object(n.a)(Array(s).keys());return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"status",children:t}),i.map((function(t){return e.renderRow(t*s,s,r||e.isPlayerTurn(e.state.game,e.aiPlayerSymbol))})),Object(O.jsxs)("div",{className:"controls",children:[Object(O.jsx)("button",{onClick:function(){return e.reset()},children:"Reset game"}),Object(O.jsx)("select",{name:"game_size",value:this.sizes[this.size][1],onChange:function(t){return e.setSize(t.target.value)},children:this.sizes.map((function(e){return Object(O.jsx)("option",{id:"{opt[0]}",children:e[1]},e[0])}))})]})]})}}]),r}(c.a.Component),p=function(e){Object(a.a)(r,e);var t=Object(o.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"game",children:[Object(O.jsx)("div",{className:"game-board",children:Object(O.jsx)(_,{size:"5x5"})}),Object(O.jsxs)("div",{className:"game-info",children:[Object(O.jsx)("div",{}),Object(O.jsx)("ol",{})]})]})}}]),r}(c.a.Component);h.a.render(Object(O.jsx)(p,{}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6032fe2a.chunk.js.map