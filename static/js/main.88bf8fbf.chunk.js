(this.webpackJsonptictactoe_react=this.webpackJsonptictactoe_react||[]).push([[0],{17:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(10),s=r(2),a=r(3),i=r(8),u=r(7),o=r(1),c=r.n(o),l=r(11),h=r.n(l),f=(r(17),r(12)),v=r(6),g=Object(v.a)("_size"),y=Object(v.a)("_turn"),m=Object(v.a)("squares"),b=function(){function e(t){if(Object(s.a)(this,e),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),t<3||t%2!==1)throw new Error("The argument size: '".concat(t,"' is not valid for tic tac toe (3, 5, 7, ...)"));this._size=t,this.reset()}return Object(a.a)(e,[{key:"size",get:function(){return this._size}},{key:"from",value:function(){var t=new e(this.size);t._turn=this.turn;for(var r=0;r<this.squares.length;r++)t.squares[r]=this.squares[r];return t}},{key:"reset",value:function(){this._turn=0,this.squares=Array(this.size*this.size).fill(null)}},{key:"_scoreSegment",value:function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.squares[e],s=this.squares,a=0,i=0;i<r;i++,e+=t)n===s[e]&&a++;return a}},{key:"_getChecks",value:function(){for(var e=this.size,t=[[0,e+1],[e-1,e-1]],r=0;r<e;r++)t.push([r*e,1]),t.push([r,e]);return t}},{key:"getScore",value:function(e){for(var t=this._getChecks(),r=0,n=this.size,s=0;s<t.length;s++){var a=this._scoreSegment(t[s][0],t[s][1],n,e);a>r&&(r=a)}return r}},{key:"checkWinner",value:function(){for(var e=this.size,t=this._getChecks(),r=0;r<t.length;r++)if(this._scoreSegment(t[r][0],t[r][1],e)===e)return this.squares[t[r][0]];return!1}},{key:"turn",get:function(){return this._turn}},{key:"getTurnSymbol",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.turn;return e%2===0?"X":"O"}},{key:"getSquareSymbol",value:function(e){return this.squares[e]}},{key:"countPlayerSymbols",value:function(e){return this.squares.reduce((function(t,r){return r===e?t+1:t}),0)}},{key:"getValidMoves",value:function(){var e=this,t=this.getTurnSymbol();if(!(this.countPlayerSymbols(t)>=this.size)){var r=[];return this.squares.forEach((function(t,n){(function(e,t,r){return(0!==t||e!==Math.floor(r.length/2))&&null===r[e]})(n,e.turn,e.squares)&&r.push([n])})),r}var n=function(){for(var r=[],n=function(n){if(e.getSquareSymbol(n)===t){e.squares[n]=null;var s=e.getValidMoves();e.squares[n]=t,s.forEach((function(e){n!==e[0]&&r.push([n,e[0]])}))}},s=0;s<e.squares.length;s++)n(s);return{v:r}}();if("object"===typeof n)return n.v}},{key:"doMove",value:function(e){Array.isArray(e)||(e=[e]);var t,r=this.getValidMoves(),n=Object(f.a)(r);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(2===e.length)2===s.length&&e[0]===s[0]&&e[1]===s[1]&&(this.squares[e[0]]=null,this.squares[e[1]]=this.getTurnSymbol(),this._turn++);else if(s[0]===e[0]){var a=e[0];return null===this.squares[a]?(this.squares[a]=this.getTurnSymbol(),this._turn++):this.squares[a]=null,!0}}}catch(i){n.e(i)}finally{n.f()}}},{key:"_setSquare",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getTurnSymbol();this.squares[e]=t}}]),e}();function d(e){if(!e instanceof b)throw new TypeError("argument tttGame is not an instance of TicTacToe");var t=j(e.from(),0,e.size<5?6:2);Array.isArray(t)?e.doMove(t[1]):(console.log("AI is screwed... doing random move"),function(e){if(!e instanceof b)throw new TypeError("argument tttGame is not an instance of TicTacToe");var t,r=e.getValidMoves();do{t=r[Math.floor(Math.random()*r.length)]}while(t[0]===t[1]);e.doMove(t)}(e))}function j(e,t,r){for(var n=e.getValidMoves(),s=[],a=0;a<n.length;a++){if(k(e.from(),n[a])===e.size)return[e.size,n[a]];if(t+1<r){var i=e.from();i.doMove(n[a]);var u=j(i,t+1,r);if(!Array.isArray(u))return[e.size,n[a]];Math.abs(u[0])<e.size&&s.push([-u[0],n[a]])}else s.push([0,n[a]])}if(s.sort((function(e,t){return t-e})),s.length>1)for(;s[0][0]!==s[s.length-1][0];)s.pop();return s[Math.floor(Math.random()*s.length)]}function k(e,t){var r=e.getTurnSymbol();return e.doMove(t),e.getScore(r)}var S=r(0),O=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={value:null},n}return Object(a.a)(r,[{key:"render",value:function(){var e=this;return Object(S.jsx)("button",{className:"square",onClick:function(){return e.props.onClick()},children:this.props.value})}}]),r}(c.a.Component),p=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).size=0,n.sizes=[[3,"3x3"],[5,"5x5"],[7,"7x7"],[9,"9x9"]],n.state=n.getInitialState(),n.aiPlayerSymbol=n.state.game.getTurnSymbol(1),n}return Object(a.a)(r,[{key:"renderSquare",value:function(e,t){var r=this;return Object(S.jsx)(O,{value:this.state.game.getSquareSymbol(e),onClick:function(){return t?r.doNada():r.handleClick(e)}},e)}},{key:"doNada",value:function(){}},{key:"constructState",value:function(e){return{game:e}}},{key:"isPlayerTurn",value:function(e,t){return e.getTurnSymbol()===t}},{key:"handleClick",value:function(e){if(this.state.game.doMove(e)&&(this.setState(this.constructState(this.state.game)),!this.state.game.checkWinner()&&this.isPlayerTurn(this.state.game,this.aiPlayerSymbol))){var t=this.state.game,r=this;setTimeout((function(){d(t),r.setState(r.constructState(r.state.game))}),2e3)}}},{key:"renderRow",value:function(e,t,r){var s=this,a=Object(n.a)(Array(t).keys());return Object(S.jsx)("div",{className:"board-row",children:a.map((function(t){return s.renderSquare(e+t,r)}))},e)}},{key:"getInitialState",value:function(){return this.constructState(new b(this.sizes[this.size][0]))}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"setSize",value:function(e){for(var t=0;t<this.sizes.length;t++)e===this.sizes[t][1]&&(this.size=t);this.setState(this.constructState(this.state.game))}},{key:"render",value:function(){var e=this,t="Turn: ".concat(this.state.game.turn+1," Next Player: ").concat(this.state.game.getTurnSymbol()),r=this.state.game.checkWinner(),s=this.state.game.size;r&&(t="Winner is: ".concat(r," at Turn: ").concat(this.state.game.turn));var a=Object(n.a)(Array(s).keys());return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"status",children:t}),a.map((function(t){return e.renderRow(t*s,s,r||e.isPlayerTurn(e.state.game,e.aiPlayerSymbol))})),Object(S.jsxs)("div",{className:"controls",children:[Object(S.jsx)("button",{onClick:function(){return e.reset()},children:"Reset game"}),Object(S.jsx)("select",{name:"game_size",value:this.sizes[this.size][1],onChange:function(t){return e.setSize(t.target.value)},children:this.sizes.map((function(e){return Object(S.jsx)("option",{id:"{opt[0]}",children:e[1]},e[0])}))})]})]})}}]),r}(c.a.Component),z=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return Object(S.jsxs)("div",{className:"game",children:[Object(S.jsx)("div",{className:"game-board",children:Object(S.jsx)(p,{size:"5x5"})}),Object(S.jsxs)("div",{className:"game-info",children:[Object(S.jsx)("div",{}),Object(S.jsx)("ol",{})]})]})}}]),r}(c.a.Component);h.a.render(Object(S.jsx)(z,{}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.88bf8fbf.chunk.js.map